(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[490],{14:function(e,t,n){Promise.resolve().then(n.bind(n,7334))},7334:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var a=n(2438),s=n(8574),c=n(2506);function r(){let[e,t]=(0,s.useState)(""),[n,r]=(0,s.useState)(0),[l,i]=(0,s.useState)([]),[d,o]=(0,s.useState)(0),[h,u]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let t=!0;return u(!0),(0,c.R1)("/db/invoices",{limit:25,offset:25*n,q:e}).then(e=>{t&&(i(e.data||[]),o(e.total||0))}).finally(()=>t&&u(!1)),()=>{t=!1}},[e,n]),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,a.jsx)("input",{className:"input input-bordered w-full max-w-md",placeholder:"Search invoices (id/customer)…",value:e,onChange:e=>{r(0),t(e.target.value)}}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:[d," total"]})]}),(0,a.jsx)("div",{className:"overflow-x-auto rounded-xl border",children:(0,a.jsxs)("table",{className:"table w-full",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Invoice #"}),(0,a.jsx)("th",{children:"Customer"}),(0,a.jsx)("th",{children:"Txn Date"}),(0,a.jsx)("th",{children:"Due Date"}),(0,a.jsx)("th",{children:"Total"}),(0,a.jsx)("th",{children:"Balance"}),(0,a.jsx)("th",{children:"Status"})]})}),(0,a.jsx)("tbody",{children:h?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"py-10 text-center text-gray-500",children:"Loading…"})}):l.length?l.map(e=>{var t,n,s;return(0,a.jsxs)("tr",{className:"hover",children:[(0,a.jsx)("td",{children:e.qbo_id}),(0,a.jsx)("td",{children:e.customer_ref||"—"}),(0,a.jsx)("td",{children:e.txn_date?new Date(e.txn_date).toLocaleDateString():"—"}),(0,a.jsx)("td",{children:e.due_date?new Date(e.due_date).toLocaleDateString():"—"}),(0,a.jsx)("td",{children:null!==(t=e.total_amt)&&void 0!==t?t:"—"}),(0,a.jsx)("td",{children:null!==(n=e.balance)&&void 0!==n?n:"—"}),(0,a.jsx)("td",{children:null!==(s=e.status)&&void 0!==s?s:"—"})]},e.qbo_id)}):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"py-10 text-center text-gray-500",children:"No invoices"})})})]})}),(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,a.jsx)("button",{className:"btn btn-sm",disabled:0===n,onClick:()=>r(e=>e-1),children:"Prev"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:["Page ",n+1]}),(0,a.jsx)("button",{className:"btn btn-sm",disabled:(n+1)*25>=d,onClick:()=>r(e=>e+1),children:"Next"})]})]})}},2506:function(e,t,n){"use strict";n.d(t,{R1:function(){return s}});let a="http://localhost:3000/api".trim();async function s(e,t){var n;let{init:s,query:c}=function(e){if(!e)return{init:{},query:{}};let{query:t,limit:n,offset:a,q:s,...c}=e,r={...t||{}};return void 0!==n&&(r.limit=n),void 0!==a&&(r.offset=a),void 0!==s&&(r.q=s),{init:c,query:r}}(t),r="".concat(a).concat(e).concat(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new URLSearchParams;for(let[n,a]of Object.entries(e))null!=a&&""!==a&&(Array.isArray(a)?a.forEach(e=>t.append(n,String(e))):t.append(n,String(a)));let n=t.toString();return n?"?".concat(n):""}(c)),l=await fetch(r,{...s,method:"GET",headers:{accept:"application/json",...s.headers||{}},cache:null!==(n=s.cache)&&void 0!==n?n:"no-store"});if(!l.ok){let t=await l.text().catch(()=>"");throw Error("GET ".concat(e," failed: ").concat(l.status," ").concat(l.statusText," ").concat(t))}return l.json()}}},function(e){e.O(0,[387,770,744],function(){return e(e.s=14)}),_N_E=e.O()}]);